(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{764:function(t,n,s){"use strict";s.r(n);var a=s(5),e=Object(a.a)({},(function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("官网：http://www.jfree.org/jfreechart/"),s("br"),t._v("\n准备工作："),s("br"),t._v("\n搭建springboot工程")]),t._v(" "),s("h2",{attrs:{id:"包引用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包引用"}},[t._v("#")]),t._v(" 包引用")]),t._v(" "),s("p",[t._v("引入PDF包。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("\t<dependency>\n\t\t<groupId>org.springframework.boot</groupId>\n\t\t<artifactId>spring-boot-starter-thymeleaf</artifactId>\n\t</dependency>\n\t<dependency>\n\t\t<groupId>org.xhtmlrenderer</groupId>\n\t\t<artifactId>flying-saucer-pdf-openpdf</artifactId>\n\t\t<version>9.1.22</version>\n\t</dependency>\n\t<dependency>\n\t\t<groupId>com.openhtmltopdf</groupId>\n\t\t<artifactId>openhtmltopdf-pdfbox</artifactId>\n\t\t<version>1.0.10</version>\n\t</dependency>\n\t\x3c!-- Optional: 如果需要支持 base64 编码的图片 --\x3e\n\t<dependency>\n\t\t<groupId>com.openhtmltopdf</groupId>\n\t\t<artifactId>openhtmltopdf-svg-support</artifactId>\n\t\t<version>1.0.10</version>\n\t</dependency>\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("p",[t._v("如果需要绘制图形（例如饼图、折线图），需要结合JFreeChart使用。")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("    <dependency>\n        <groupId>org.jfree</groupId>\n        <artifactId>jfreechart</artifactId>\n        <version>1.5.3</version>\n    </dependency>\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("h2",{attrs:{id:"示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例"}},[t._v("#")]),t._v(" 示例")]),t._v(" "),s("p",[t._v("resources/templates/pdf_template.html")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<!DOCTYPE html>\n<html xmlns:th="http://www.thymeleaf.org">\n<head>\n    <meta charset="UTF-8" />\n    <title>PDF Export</title>\n    <style>\n        body {\n            font-family: \'simsun\', sans-serif;\n        }\n    </style>\n</head>\n<body>\n    <h1 class="header">PDF 导出示例z</h1>\n    <p th:text="\'用户姓名: \' + ${name}"></p>\n    <p th:text="\'当前时间: \' + ${currentDate}"></p>\n\t<div>img base64 test:</div>\n    <div class="image-container">\n\t\t<img th:src="${imagePath}" alt="示例图片" width="300"/>\n    </div> \n</body>\n</html>\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br")])]),s("p",[t._v("PdfController")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('@RestController\n@RequestMapping("/pdf")\npublic class PdfController {\n\n\t@Autowired\n\tprivate SpringTemplateEngine templateEngine;\n\n\t/**\n\t * 图片转Base64\n\t */\n\tpublic static String encodeImageToBase64(String imagePath) throws IOException {\n\t\tbyte[] imageBytes = Files.readAllBytes(Paths.get(imagePath));\n\t\treturn Base64.getEncoder().encodeToString(imageBytes);\n\t}\n\n\t@GetMapping("/exportPdf")\n\tpublic void exportPdf(HttpServletResponse response, Model model) throws IOException {\n\t\t// 设置响应类型为 PDF\n\t\tresponse.setContentType("application/pdf");\n\t\tresponse.setHeader("Content-Disposition", "attachment; filename=export.pdf");\n\n\t\tString imgPath = new ClassPathResource("templates/test.png").getFile().getAbsolutePath();\n\t\t// 填充模型数据\n\t\tmodel.addAttribute("name", "张三");\n\t\tmodel.addAttribute("currentDate", LocalDateTime.now());\n\t\tmodel.addAttribute("imgPath", imgPath);\n\t\t// 图片路径，可以是绝对路径、相对路径或 base64 编码\n\t\tString base64Image = "data:image/jpeg;base64," + encodeImageToBase64(imgPath);\n\t\tmodel.addAttribute("imagePath", base64Image);\n\n\t\t// 渲染 Thymeleaf 模板为 HTML 字符串\n\t\tContext context = new Context();\n\t\tcontext.setVariables(model.asMap());\n\t\tString htmlContent = templateEngine.process("pdf_template", context);\n\n\t\t// 加载字体\n\t\tString fontPath = new ClassPathResource("fonts/SimSun.ttf").getFile().getAbsolutePath();\n\t\t// 将 HTML 转换为 PDF\n\t\ttry (ByteArrayOutputStream os = new ByteArrayOutputStream()) {\n\t\t\tPdfRendererBuilder builder = new PdfRendererBuilder();\n\t\t\tbuilder.useFont(new FSSupplier<InputStream>() {\n\t\t\t\t@Override\n\t\t\t\tpublic InputStream supply() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn new FileInputStream(fontPath);\n\t\t\t\t\t} catch (FileNotFoundException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}, "simsun");\n\t\t\tbuilder.withHtmlContent(htmlContent, "");\n\t\t\tbuilder.toStream(os);\n\t\t\tbuilder.run();\n\t\t\t// 将 PDF 写入响应输出流\n\t\t\tresponse.getOutputStream().write(os.toByteArray());\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n\n}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br")])]),s("h2",{attrs:{id:"jfreechart图片转base64"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jfreechart图片转base64"}},[t._v("#")]),t._v(" JFreeChart图片转base64")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('\tprivate String createPdfPie3() {\n\t\tString base64Image = null;\n\t\ttry {\n\t\t\t// Step 1: 创建数据集\n\t\t\tDefaultPieDataset dataset = new DefaultPieDataset();\n\t\t\tdataset.setValue("类别A", 40);\n\t\t\tdataset.setValue("类别B", 30);\n\t\t\tdataset.setValue("类别C", 20);\n\t\t\tdataset.setValue("类别D", 10);\n\t\t\t// Step 2: 使用 JFreeChart 创建饼图\n\t\t\tJFreeChart pieChart = ChartFactory.createPieChart(\n\t\t\t\t\t"示例饼图", // 图表标题\n\t\t\t\t\tdataset,   // 数据集\n\t\t\t\t\ttrue,      // 是否显示图例\n\t\t\t\t\ttrue,\n\t\t\t\t\tfalse);\n\t\t\t// Step 3: 设置字体以显示中文\n\t\t\tPiePlot plot = (PiePlot) pieChart.getPlot();\n\t\t\tFont font = new Font("SimHei", Font.PLAIN, 24); // 使用 "SimHei" 或其他支持中文的字体\n\t\t\tpieChart.getTitle().setFont(font);              // 设置标题字体\n\t\t\tpieChart.getLegend().setItemFont(font);         // 设置图例字体\n\t\t\tplot.setLabelFont(font);                        // 设置饼图标签字体\n\t\t\t// Step 4: 渲染为 BufferedImage\n\t\t\tBufferedImage bufferedImage = pieChart.createBufferedImage(1200, 800);\n\t\t\t// Step 5: 将 BufferedImage 转换为字节数组\n\t\t\tByteArrayOutputStream baos = new ByteArrayOutputStream();\n\t\t\tImageIO.write(bufferedImage, "png", baos);\n\t\t\tbyte[] imageBytes = baos.toByteArray();\n\t\t\t// Step 6: 将字节数组编码为 Base64 字符串\n\t\t\tbase64Image = Base64.getEncoder().encodeToString(imageBytes);\n\t\t\t// 输出 Base64 字符串\n\t\t\tSystem.out.println("Base64 Image: " + base64Image);\n\t\t\treturn base64Image;\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t\treturn base64Image;\n\t}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br")])]),s("h2",{attrs:{id:"示例2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例2"}},[t._v("#")]),t._v(" 示例2")]),t._v(" "),s("p",[t._v("resources/templates/pdf_sample.html")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('<!DOCTYPE html>\n<html xmlns:th="http://www.thymeleaf.org">\n<head>\n    <meta charset="UTF-8" />\n    <title>PDF Export</title>\n    <style>\n        body {\n            font-family: \'simsun\', sans-serif;\n        }\n        .textBule {\n            color: #597CBD;\n        }\n        .downImg {\n            text-align: center;\n        }\n        .countDiv {\n            text-align: center;\n        }\n        .countDiv .countDiv1 {\n            font-size: 30px;\n            font-weight: bold;\n            margin-top: 5px;\n        }\n        .countDiv .countDiv2 {\n            font-size: 16px;\n            font-weight: bold;\n            color: #92979B;\n            margin-top: 5px;\n        }\n        .countDiv .countDiv3 {\n            font-size: 12px;\n            font-weight: bold;\n            color: red;\n            margin-top: 5px;\n        }\n        .countDiv .countDiv4 {\n            font-size: 12px;\n            font-weight: bold;\n            color: #92979B;\n            margin-top: 5px;\n        }\n        .container {\n            /* display: flex; */\n            height: 300px;\n        }\n        .left {\n            /* flex: 1; */\n            float: left;\n            width: 50%;\n        }\n        \n        .right {\n            /* flex: 1; */\n            float: left;\n            width: 50%;\n        }\n        .progress-container {\n            width: 50%;\n            background-color: #e0e0e0; /* 进度条的背景颜色 */\n            border-radius: 4px; /* 圆角边框 */\n            overflow: hidden; /* 确保子元素不超出容器范围 */\n            display: inline-block;\n        }\n            \n        .progress-bar {\n            height: 8px; /* 进度条的高度 */\n            background-color: #557CC6; /* 进度条的颜色 */\n            border-radius: 4px; /* 圆角边框 */\n            transition: width 0.5s ease; /* 进度条变化时的动画效果 */\n            text-align: center; /* 文字居中 */\n            color: white; /* 文字颜色 */\n            line-height: 20px; /* 文字垂直居中 */\n        }\n        table {\n            width: 100%;\n            border-collapse: collapse;\n        }\n        th, td {\n            border: 1px solid #ddd;\n            padding: 8px;\n            text-align: left;\n        }\n        th {\n            background-color: #f2f2f2;\n        }\n        tr:hover {\n            background-color: #f5f5f5;\n        }\n    </style>\n</head>\n<body>\n    <h1 style="text-align: center">安全周报</h1>\n    <h3 style="text-align: center">7月22日-7月29日</h3>\n    <h4>安全态势</h4>\n    <h4 style="text-align: center">\n        本期共发现本地设备<span class="textBule">20</span>台，原始攻击<span class="textBule">120</span>次\n    </h4>\n    <div class="downImg">\n\t\t\x3c!-- <img src="down.png" alt="示例图片"/> --\x3e\n        <img th:src="${imageDown}" alt="示例图片" width="75"/>\n    </div>\n    <div class="countDiv">\n\t\t<div class="countDiv1">180次</div>\n        <div class="countDiv2">勒索</div>\n        <div class="countDiv3">2次 较上周</div>\n        <div class="countDiv4">已处置100次</div>\n    </div>\n    <hr />\n    <h4>安全事件</h4>\n    <div class="container">\n        <div class="left">\n            <div>img base64 test:</div>\n            <div class="image-container">\n                <img th:src="${imagePath}" alt="示例图片" width="300"/>\n            </div>\n        </div>\n        <div class="right">\n            <div>\n                进度条\n                <div class="progress-container">\n                    <div class="progress-bar" style="width: 75%;"></div>\n                </div>\n                76\n            </div>\n            <div>\n                进度条\n                <div class="progress-container">\n                    <div class="progress-bar" style="width: 50%;"></div>\n                </div>\n                50\n            </div>\n        </div>\n    </div>\n    <hr />\n    <h4>表格</h4>\n    <table>\n        <thead>\n            <tr>\n                <th>编号</th>\n                <th>姓名</th>\n                <th>年龄</th>\n                <th>城市</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr>\n                <td>1</td>\n                <td>张三</td>\n                <td>25</td>\n                <td>北京</td>\n            </tr>\n            <tr>\n                <td>2</td>\n                <td>李四</td>\n                <td>30</td>\n                <td>上海</td>\n            </tr>\n            <tr>\n                <td>3</td>\n                <td>王五</td>\n                <td>28</td>\n                <td>广州</td>\n            </tr>\n        </tbody>\n    </table>\n\n    <h4>变量示例</h4>\n    <p th:text="\'用户姓名: \' + ${name}"></p>\n    <p th:text="\'当前时间: \' + ${currentDate}"></p>\n</body>\n</html>\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br"),s("span",{staticClass:"line-number"},[t._v("86")]),s("br"),s("span",{staticClass:"line-number"},[t._v("87")]),s("br"),s("span",{staticClass:"line-number"},[t._v("88")]),s("br"),s("span",{staticClass:"line-number"},[t._v("89")]),s("br"),s("span",{staticClass:"line-number"},[t._v("90")]),s("br"),s("span",{staticClass:"line-number"},[t._v("91")]),s("br"),s("span",{staticClass:"line-number"},[t._v("92")]),s("br"),s("span",{staticClass:"line-number"},[t._v("93")]),s("br"),s("span",{staticClass:"line-number"},[t._v("94")]),s("br"),s("span",{staticClass:"line-number"},[t._v("95")]),s("br"),s("span",{staticClass:"line-number"},[t._v("96")]),s("br"),s("span",{staticClass:"line-number"},[t._v("97")]),s("br"),s("span",{staticClass:"line-number"},[t._v("98")]),s("br"),s("span",{staticClass:"line-number"},[t._v("99")]),s("br"),s("span",{staticClass:"line-number"},[t._v("100")]),s("br"),s("span",{staticClass:"line-number"},[t._v("101")]),s("br"),s("span",{staticClass:"line-number"},[t._v("102")]),s("br"),s("span",{staticClass:"line-number"},[t._v("103")]),s("br"),s("span",{staticClass:"line-number"},[t._v("104")]),s("br"),s("span",{staticClass:"line-number"},[t._v("105")]),s("br"),s("span",{staticClass:"line-number"},[t._v("106")]),s("br"),s("span",{staticClass:"line-number"},[t._v("107")]),s("br"),s("span",{staticClass:"line-number"},[t._v("108")]),s("br"),s("span",{staticClass:"line-number"},[t._v("109")]),s("br"),s("span",{staticClass:"line-number"},[t._v("110")]),s("br"),s("span",{staticClass:"line-number"},[t._v("111")]),s("br"),s("span",{staticClass:"line-number"},[t._v("112")]),s("br"),s("span",{staticClass:"line-number"},[t._v("113")]),s("br"),s("span",{staticClass:"line-number"},[t._v("114")]),s("br"),s("span",{staticClass:"line-number"},[t._v("115")]),s("br"),s("span",{staticClass:"line-number"},[t._v("116")]),s("br"),s("span",{staticClass:"line-number"},[t._v("117")]),s("br"),s("span",{staticClass:"line-number"},[t._v("118")]),s("br"),s("span",{staticClass:"line-number"},[t._v("119")]),s("br"),s("span",{staticClass:"line-number"},[t._v("120")]),s("br"),s("span",{staticClass:"line-number"},[t._v("121")]),s("br"),s("span",{staticClass:"line-number"},[t._v("122")]),s("br"),s("span",{staticClass:"line-number"},[t._v("123")]),s("br"),s("span",{staticClass:"line-number"},[t._v("124")]),s("br"),s("span",{staticClass:"line-number"},[t._v("125")]),s("br"),s("span",{staticClass:"line-number"},[t._v("126")]),s("br"),s("span",{staticClass:"line-number"},[t._v("127")]),s("br"),s("span",{staticClass:"line-number"},[t._v("128")]),s("br"),s("span",{staticClass:"line-number"},[t._v("129")]),s("br"),s("span",{staticClass:"line-number"},[t._v("130")]),s("br"),s("span",{staticClass:"line-number"},[t._v("131")]),s("br"),s("span",{staticClass:"line-number"},[t._v("132")]),s("br"),s("span",{staticClass:"line-number"},[t._v("133")]),s("br"),s("span",{staticClass:"line-number"},[t._v("134")]),s("br"),s("span",{staticClass:"line-number"},[t._v("135")]),s("br"),s("span",{staticClass:"line-number"},[t._v("136")]),s("br"),s("span",{staticClass:"line-number"},[t._v("137")]),s("br"),s("span",{staticClass:"line-number"},[t._v("138")]),s("br"),s("span",{staticClass:"line-number"},[t._v("139")]),s("br"),s("span",{staticClass:"line-number"},[t._v("140")]),s("br"),s("span",{staticClass:"line-number"},[t._v("141")]),s("br"),s("span",{staticClass:"line-number"},[t._v("142")]),s("br"),s("span",{staticClass:"line-number"},[t._v("143")]),s("br"),s("span",{staticClass:"line-number"},[t._v("144")]),s("br"),s("span",{staticClass:"line-number"},[t._v("145")]),s("br"),s("span",{staticClass:"line-number"},[t._v("146")]),s("br"),s("span",{staticClass:"line-number"},[t._v("147")]),s("br"),s("span",{staticClass:"line-number"},[t._v("148")]),s("br"),s("span",{staticClass:"line-number"},[t._v("149")]),s("br"),s("span",{staticClass:"line-number"},[t._v("150")]),s("br"),s("span",{staticClass:"line-number"},[t._v("151")]),s("br"),s("span",{staticClass:"line-number"},[t._v("152")]),s("br"),s("span",{staticClass:"line-number"},[t._v("153")]),s("br"),s("span",{staticClass:"line-number"},[t._v("154")]),s("br"),s("span",{staticClass:"line-number"},[t._v("155")]),s("br"),s("span",{staticClass:"line-number"},[t._v("156")]),s("br"),s("span",{staticClass:"line-number"},[t._v("157")]),s("br"),s("span",{staticClass:"line-number"},[t._v("158")]),s("br"),s("span",{staticClass:"line-number"},[t._v("159")]),s("br"),s("span",{staticClass:"line-number"},[t._v("160")]),s("br"),s("span",{staticClass:"line-number"},[t._v("161")]),s("br"),s("span",{staticClass:"line-number"},[t._v("162")]),s("br"),s("span",{staticClass:"line-number"},[t._v("163")]),s("br"),s("span",{staticClass:"line-number"},[t._v("164")]),s("br"),s("span",{staticClass:"line-number"},[t._v("165")]),s("br"),s("span",{staticClass:"line-number"},[t._v("166")]),s("br"),s("span",{staticClass:"line-number"},[t._v("167")]),s("br"),s("span",{staticClass:"line-number"},[t._v("168")]),s("br"),s("span",{staticClass:"line-number"},[t._v("169")]),s("br"),s("span",{staticClass:"line-number"},[t._v("170")]),s("br"),s("span",{staticClass:"line-number"},[t._v("171")]),s("br")])]),s("p",[t._v("PdfController")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('\t@GetMapping("/test")\n\tpublic void test(HttpServletResponse response, Model model) throws IOException {\n\t\t// 设置响应类型为 PDF\n\t\tresponse.setContentType("application/pdf");\n\t\tresponse.setHeader("Content-Disposition", "attachment; filename=export.pdf");\n\n\t\tString imgDownPath = new ClassPathResource("templates/down.png").getFile().getAbsolutePath();\n\t\t// 填充模型数据\n\t\tmodel.addAttribute("name", "张三");\n\t\tmodel.addAttribute("currentDate", LocalDateTime.now());\n\t\t//model.addAttribute("imgPath", imgPath);\n\t\t// 图片路径，可以是绝对路径、相对路径或 base64 编码\n\t\tString base64ImageDown = "data:image/jpeg;base64," + encodeImageToBase64(imgDownPath);\n\t\tmodel.addAttribute("imageDown", base64ImageDown);\n\t\tmodel.addAttribute("imagePath", "data:image/jpeg;base64," + createPdfPie3());\n\n\t\t// 渲染 Thymeleaf 模板为 HTML 字符串\n\t\tContext context = new Context();\n\t\tcontext.setVariables(model.asMap());\n\t\tString htmlContent = templateEngine.process("pdf_sample", context);\n\n\t\t// 加载字体\n\t\tString fontPath = new ClassPathResource("fonts/SimSun.ttf").getFile().getAbsolutePath();\n\t\t// 将 HTML 转换为 PDF\n\t\ttry (ByteArrayOutputStream os = new ByteArrayOutputStream()) {\n\t\t\tPdfRendererBuilder builder = new PdfRendererBuilder();\n\t\t\tbuilder.useFont(new FSSupplier<InputStream>() {\n\t\t\t\t@Override\n\t\t\t\tpublic InputStream supply() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn new FileInputStream(fontPath);\n\t\t\t\t\t} catch (FileNotFoundException e) {\n\t\t\t\t\t\te.printStackTrace();\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}, "simsun");\n\t\t\tbuilder.withHtmlContent(htmlContent, "");\n\t\t\tbuilder.toStream(os);\n\t\t\tbuilder.run();\n\t\t\t// 将 PDF 写入响应输出流\n\t\t\tresponse.getOutputStream().write(os.toByteArray());\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t}\n\t}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br")])])])}),[],!1,null,null,null);n.default=e.exports}}]);