(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{714:function(s,e,a){s.exports=a.p+"assets/img/ice.1bff3a20.jpg"},715:function(s,e,a){s.exports=a.p+"assets/img/signal.dbedc6e4.jpg"},716:function(s,e,a){s.exports=a.p+"assets/img/signal2.4eb4cd7a.jpg"},717:function(s,e,a){s.exports=a.p+"assets/img/peer.c25562db.png"},751:function(s,e,a){"use strict";a.r(e);var n=a(5),r=Object(n.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"webrtc"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webrtc"}},[s._v("#")]),s._v(" Webrtc")]),s._v(" "),n("p",[s._v("WebRTC是一个由Google发起的实时通讯解决方案，其中包含视频音频采集，编解码，数据传输，音视频展示等功能，我们可以通过技术快速地构建出一个音视频通讯应用。虽然其名为WebRTC，但是实际上它不光支持Web之间的音视频通讯，还支持Android以及IOS端，此外由于该项目是开源的，我们也可以通过编译C++代码，从而达到全平台的互通。")]),s._v(" "),n("h2",{attrs:{id:"源码地址"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#源码地址"}},[s._v("#")]),s._v(" 源码地址")]),s._v(" "),n("p",[n("a",{attrs:{href:"https://github.com/zz-media/webrtc",target:"_blank",rel:"noopener noreferrer"}},[s._v("DEMO"),n("OutboundLink")],1)]),s._v(" "),n("h2",{attrs:{id:"交互流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#交互流程"}},[s._v("#")]),s._v(" 交互流程")]),s._v(" "),n("h3",{attrs:{id:"ice整体流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ice整体流程"}},[s._v("#")]),s._v(" ice整体流程")]),s._v(" "),n("p",[n("img",{attrs:{src:a(714),alt:"ice流程"}})]),s._v(" "),n("h3",{attrs:{id:"信令流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#信令流程"}},[s._v("#")]),s._v(" 信令流程")]),s._v(" "),n("p",[n("img",{attrs:{src:a(715),alt:"ice流程"}}),n("br"),s._v(" "),n("img",{attrs:{src:a(716),alt:"信令说明"}})]),s._v(" "),n("h3",{attrs:{id:"连接建立流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#连接建立流程"}},[s._v("#")]),s._v(" 连接建立流程:")]),s._v(" "),n("p",[n("img",{attrs:{src:a(717),alt:"连接建立"}})]),s._v(" "),n("h2",{attrs:{id:"服务搭建"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#服务搭建"}},[s._v("#")]),s._v(" 服务搭建")]),s._v(" "),n("h3",{attrs:{id:"coturn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#coturn"}},[s._v("#")]),s._v(" coturn")]),s._v(" "),n("p",[s._v("turnserver.conf配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("listening-port=3478\nexternal-ip=124.220.1.36\nuser=admin:123456\nrealm=ruijie.asia\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("docker启动")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run -d --name turn --network=host -v /build/coturn/turnserver.conf:/etc/coturn/turnserver.conf coturn/coturn\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run -d --name turn -p 3478:3478 -p 3478:3478/udp -p 5349:5349 -p 5349:5349/udp -p 49190-49200:49190-49200/udp -v /build/coturn/turnserver.conf:/etc/coturn/turnserver.conf coturn/coturn\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("h3",{attrs:{id:"nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[s._v("#")]),s._v(" nginx")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker network ls\n创建网络\ndocker network create -d bridge server-network\ndocker run -d -p 80:80 --name mynginx nginx\n查看nginx的配置文件目录\ndocker exec -it mynginx /bin/bash\ndocker cp -a mynginx:/etc/nginx/ /build/nginx/conf/\ndocker cp -a mynginx:/usr/share/nginx/html/ /build/nginx/html/\ndocker stop mynginx\ndocker rm mynginx\ndocker run -d -p 80:80 -p 443:443 -v /build/nginx/html/:/usr/share/nginx/html/ -v /build/nginx/conf/:/etc/nginx/ --name nginx --network server-network nginx\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("访问测试 http://ruijie.asia"),n("br"),s._v("\n申请SSL证书并放在/etc/nginx/目录下"),n("br"),s._v("\nconf配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("server {\n    listen       443 ssl;\n    server_name  localhost;\n    charset 'utf-8';\n    ssl_certificate      ruijie.asia.crt;\n    ssl_certificate_key  ruijie.asia.key;\n\n    location / {\n        root   /usr/share/nginx/html;\n        index  index.html index.htm;\n    }\n\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n}\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("p",[s._v("访问测试 https://ruijie.asia")]),s._v(" "),n("h3",{attrs:{id:"server-java"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#server-java"}},[s._v("#")]),s._v(" server-java")]),s._v(" "),n("p",[s._v("编译demo工程 https://github.com/zz-media/webrtc/tree/main/server-java")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker run -d -p 18080:18080 -p 19000:19000 -v /build/server-java:/usr/local/app --name server-java --network server-network openjdk:8u272-jdk  java -jar -server -Xms256M -Xmx512M /usr/local/app/server-java.jar\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("ng conf新增配置")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('server {\n    location /socket.io/ {\n        # socket所在ip和端口号\n        proxy_pass http://server-java:19000/socket.io/;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection "upgrade";\n    } \n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"client-vue"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#client-vue"}},[s._v("#")]),s._v(" client-vue")]),s._v(" "),n("p",[s._v("编译demo工程 https://github.com/zz-media/webrtc/tree/main/server-java\n放到ng目录下\n访问 https://124.220.1.36/media-web")])])}),[],!1,null,null,null);e.default=r.exports}}]);